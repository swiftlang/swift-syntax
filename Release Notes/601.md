# Swift Syntax 601 Release Notes

## New APIs

- `IntegerLiteralExprSyntax` and `FloatLiteralExprSyntax` now have a computed `representedLiteralValue` property.
  - Description: Allows retrieving the represented literal value when valid.
  - Issue: https://github.com/apple/swift-syntax/issues/405
  - Pull Request: https://github.com/apple/swift-syntax/pull/2605

- `SyntaxProtocol` now has a method `ancestorOrSelf`.
  - Description: Returns the node or the first ancestor that satisfies `condition`.
  - Pull Request: https://github.com/swiftlang/swift-syntax/pull/2696

- `Error` protocol now has an `asDiagnostics(at:)` method.
  - Description: This method translates an error into one or more diagnostics, recognizing `DiagnosticsError` and `DiagnosticMessage` instances or providing its own `Diagnostic` as needed.
  - Pull Request: https://github.com/swiftlang/swift-syntax/pull/1816

- Added a new library `SwiftIfConfig`.
  - Description: This new library provides facilities for evaluating `#if` conditions and determining which regions of a syntax tree are active according to a given build configuration.
  - Pull Request: https://github.com/swiftlang/swift-syntax/pull/1816

- `SyntaxProtocol.tracked` / `SyntaxProtocol.originalNode(in:)`
  - Description: `tracked` enables node tracking of a tree. For every tree derived from a tracked tree, `originalNode(in:)` returns the original node in the tracked tree. This allows clients to e.g. get the original location of a node in a source file after a tree has been modified.
  - Issue: rdar://112679655
  - Pull Request: https://github.com/apple/swift-syntax/pull/2118

## API Behavior Changes

- `SyntaxProtocol.trimmed` detaches the node
  - Description: Getting a trimmed version of a node detaches it from its parent. Having the trimmed node be attached to a parent was not intuitive because eg. printing the parent node would have the trimmed trivia missing, most likely forming invalid Swift code.
  - Pull Request: https://github.com/apple/swift-syntax/pull/2689

## Deprecations

- `IncrementalEdit` deprecated in favor of `SourceEdit`
  - Description: `IncrementalEdit` is being dropped for `SourceEdit`. `SourceEdit` has deprecated compatibility layers to make it API-compatible with `IncrementalEdit`
  - Issue: https://github.com/apple/swift-syntax/issues/2532
  - Pull request: https://github.com/apple/swift-syntax/pull/2604

## API-Incompatible Changes

- Moved `Radix` and `IntegerLiteralExprSyntax.radix` from `SwiftRefactor` to `SwiftSyntax`.
  - Description: Allows retrieving the radix value from the `literal.text`.
  - Issue: https://github.com/apple/swift-syntax/issues/405
  - Pull Request: https://github.com/apple/swift-syntax/pull/2605

- `FixIt.Change` gained a new case `replaceChild(data:)`.
  - Description: The new case covers the replacement of a child node with another node.
  - Issue: https://github.com/swiftlang/swift-syntax/issues/2205
  - Pull Request: https://github.com/swiftlang/swift-syntax/pull/2758
  - Migration steps: In exhaustive switches over `FixIt.Change`, cover the new case.

## Template

- *Affected API or two word description*
  - Description: *A 1-2 sentence description of the new/modified API*
  - Issue: *If an issue exists for this change, a link to the issue*
  - Pull Request: *Link to the pull request(s) that introduces this change*
  - Migration steps: Steps that adopters of swift-syntax should take to move to the new API (required for deprecations and API-incompatible changes).
  - Notes: *In case of deprecations or API-incompatible changes, the reason why this change was made and the suggested alternative*

*Insert entries in chronological order, with newer entries at the bottom*
